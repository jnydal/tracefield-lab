@import 'flowbite/dist/flowbite.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Reserve space for scrollbar so content doesn't shift when navigating between
     short pages (no scrollbar) and long pages (scrollbar visible). */
  html {
    scrollbar-gutter: stable;
  }

  body {
    position: relative;
    min-height: 100vh;
    background-color: #f7f4ff;
  }

  .dark body {
    background-color: #0f172a; /* slate-900 */
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    background-image:
      linear-gradient(135deg, rgba(124, 58, 237, 0.08), rgba(124, 58, 237, 0.02)),
      url('/images/patterns/floral-pattern.png');
    background-repeat: no-repeat, repeat;
    background-size: cover, 300px 300px;
    background-position: center;
    background-blend-mode: soft-light, normal;
    opacity: 0.38;
    filter: grayscale(100%) contrast(0.85) brightness(1.1);
    pointer-events: none;
  }

  .dark body::before {
    opacity: 0.12;
    filter: grayscale(100%) contrast(0.6) brightness(0.5);
  }
}

@layer components {
  /* ----- Login page ----- */
  .login-page {
    @apply flex min-h-screen items-center justify-center px-6 py-8;
  }

  .login-container {
    @apply w-full max-w-md;
  }

  .login-card {
    @apply rounded-xl border border-slate-200/80 bg-white shadow-xl sm:border-slate-300 dark:border-slate-600 dark:bg-slate-800;
  }

  .login-card-inner {
    @apply flex flex-col gap-8 p-6 sm:p-8;
  }

  .login-title {
    @apply text-lg font-semibold tracking-tight text-slate-900 text-center dark:text-slate-100;
  }

  .login-subtitle {
    @apply -mt-6 text-center text-base font-medium text-slate-600 dark:text-slate-400;
  }

  .login-form {
    @apply flex flex-col gap-5;
  }

  .login-sso {
    @apply flex flex-col gap-4;
  }

  .login-sso-button {
    @apply flex w-full items-center justify-center gap-2 rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-900 shadow-sm transition hover:bg-slate-50 focus:outline-none focus:ring-4 focus:ring-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 dark:focus:ring-slate-500;
  }

  .login-sso-icon {
    flex-shrink: 0;
  }

  .login-divider {
    @apply flex items-center gap-3 text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400;
  }

  .login-divider::before,
  .login-divider::after {
    content: '';
    @apply h-px flex-1 bg-slate-200 dark:bg-slate-600;
  }

  .login-error {
    @apply text-sm;
  }

  .login-field label {
    @apply bg-white px-2 text-slate-600 dark:bg-slate-800 dark:text-slate-300;
  }

  .login-field input {
    @apply bg-transparent text-slate-900 outline-none placeholder:text-slate-400 dark:text-slate-100 dark:placeholder:text-slate-500;
  }

  .login-field input:focus {
    @apply outline-none ring-2 ring-violet-400 ring-offset-0 text-slate-900 dark:ring-violet-500 dark:text-slate-100;
  }

  .auth-field-error {
    @apply text-sm text-red-600 dark:text-red-400;
  }

  .login-links {
    @apply flex flex-col gap-2 text-center text-sm text-slate-700 dark:text-slate-300;
  }

  .login-link {
    @apply text-violet-600 hover:text-violet-800 hover:underline dark:text-violet-400 dark:hover:text-violet-300;
  }

  .login-page .ui-button {
    @apply w-full bg-violet-600 text-white hover:bg-violet-700 focus:ring-4 focus:ring-violet-300 dark:focus:ring-violet-600;
  }

  /* ----- Register page ----- */
  .register-page {
    @apply flex min-h-screen items-center justify-center px-6 py-8;
  }

  .register-container {
    @apply w-full max-w-md;
  }

  .register-card {
    @apply rounded-xl border border-slate-200/80 bg-white shadow-xl sm:border-slate-300 dark:border-slate-600 dark:bg-slate-800;
  }

  .register-card-inner {
    @apply flex flex-col gap-8 p-6 sm:p-8;
  }

  .register-title {
    @apply text-lg font-semibold tracking-tight text-slate-900 text-center dark:text-slate-100;
  }

  .register-subtitle {
    @apply -mt-6 text-center text-base font-medium text-slate-600 dark:text-slate-400;
  }

  .register-form {
    @apply flex flex-col gap-5;
  }

  .register-error {
    @apply text-sm;
  }

  .register-field label {
    @apply bg-white px-2 text-slate-600 dark:bg-slate-800 dark:text-slate-300;
  }

  .register-field input {
    @apply bg-transparent text-slate-900 outline-none placeholder:text-slate-400 dark:text-slate-100 dark:placeholder:text-slate-500;
  }

  .register-field input:focus {
    @apply outline-none ring-2 ring-violet-400 ring-offset-0 text-slate-900 dark:ring-violet-500 dark:text-slate-100;
  }

  .register-links {
    @apply flex flex-col gap-2 text-center text-sm text-slate-700 dark:text-slate-300;
  }

  .register-link {
    @apply text-violet-600 hover:text-violet-800 hover:underline dark:text-violet-400 dark:hover:text-violet-300;
  }

  .register-page .ui-button {
    @apply w-full bg-violet-600 text-white hover:bg-violet-700 focus:ring-4 focus:ring-violet-300 dark:focus:ring-violet-600;
  }

  /* ----- Forgot password page ----- */
  .forgot-password-page {
    @apply flex min-h-screen items-center justify-center px-6 py-8;
  }

  .forgot-password-container {
    @apply w-full max-w-md;
  }

  .forgot-password-card {
    @apply rounded-xl border border-slate-200/80 bg-white shadow-xl sm:border-slate-300 dark:border-slate-600 dark:bg-slate-800;
  }

  .forgot-password-card-inner {
    @apply flex flex-col gap-8 p-6 sm:p-8;
  }

  .forgot-password-title {
    @apply text-lg font-semibold tracking-tight text-slate-900 text-center dark:text-slate-100;
  }

  .forgot-password-subtitle {
    @apply -mt-6 text-center text-base font-medium text-slate-600 dark:text-slate-400;
  }

  .forgot-password-intro,
  .forgot-password-success-text {
    @apply text-sm text-slate-600 text-center dark:text-slate-400;
  }

  .forgot-password-success-note {
    @apply text-xs text-slate-500 text-center dark:text-slate-500;
  }

  .forgot-password-form {
    @apply flex flex-col gap-5;
  }

  .forgot-password-error {
    @apply text-sm;
  }

  .forgot-password-field label {
    @apply bg-white px-2 text-slate-600 dark:bg-slate-800 dark:text-slate-300;
  }

  .forgot-password-field input {
    @apply bg-transparent text-slate-900 outline-none placeholder:text-slate-400 dark:text-slate-100 dark:placeholder:text-slate-500;
  }

  .forgot-password-field input:focus {
    @apply outline-none ring-2 ring-violet-400 ring-offset-0 text-slate-900 dark:ring-violet-500 dark:text-slate-100;
  }

  .forgot-password-links {
    @apply flex flex-col gap-2 text-center text-sm text-slate-700 dark:text-slate-300;
  }

  .forgot-password-link {
    @apply text-violet-600 hover:text-violet-800 hover:underline dark:text-violet-400 dark:hover:text-violet-300;
  }

  .forgot-password-page .ui-button {
    @apply w-full bg-violet-600 text-white hover:bg-violet-700 focus:ring-4 focus:ring-violet-300 dark:focus:ring-violet-600;
  }

  /* ----- Landing page ----- */
  .landing-page {
    @apply flex min-h-screen items-center justify-center px-6 py-10;
  }

  .landing-shell {
    @apply w-full max-w-4xl;
  }

  .landing-hero {
    @apply flex flex-col items-center gap-4 text-center;
  }

  .landing-hero-kicker {
    @apply text-sm font-semibold uppercase tracking-[0.2em] text-violet-600 dark:text-violet-400;
  }

  .landing-hero-title {
    @apply text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl dark:text-slate-100;
  }

  .landing-hero-copy {
    @apply text-base text-slate-600 sm:text-lg dark:text-slate-400;
  }

  .landing-hero-card {
    @apply mt-8 flex flex-col gap-6 rounded-3xl border border-slate-200/80 bg-white p-6 shadow-lg sm:p-8 sm:border-slate-300 dark:border-slate-600 dark:bg-slate-800;
  }

  .landing-hero-card-visual img {
    width: 100%;
    height: auto;
  }

  .landing-cta-card {
    @apply mt-8 flex flex-col gap-6 rounded-xl border border-slate-200/80 bg-white p-6 text-center shadow-xl sm:p-8 sm:border-slate-300 dark:border-slate-600 dark:bg-slate-800;
  }

  .landing-cta-title {
    @apply text-xl font-semibold text-slate-900 dark:text-slate-100;
  }

  .landing-cta-copy {
    @apply text-sm text-slate-600 sm:text-base dark:text-slate-400;
  }

  .landing-cta-actions {
    @apply flex justify-center;
  }

  .landing-cta-button {
    @apply w-full bg-violet-600 text-white hover:bg-violet-700 focus:ring-4 focus:ring-violet-300 sm:w-auto dark:focus:ring-violet-600;
  }

  /* ----- About page ----- */
  .about-page {
    @apply flex min-h-screen items-center justify-center px-6 py-10;
  }

  .about-shell {
    @apply w-full max-w-4xl;
  }

  .about-hero-card {
    @apply mt-8 flex flex-col gap-6 rounded-3xl border border-slate-200/80 bg-white p-6 shadow-lg sm:p-8 sm:border-slate-300 dark:border-slate-600 dark:bg-slate-800;
  }

  .about-hero {
    @apply flex flex-col items-center gap-4 text-center;
  }

  .about-hero-kicker {
    @apply text-sm font-semibold uppercase tracking-[0.2em] text-violet-600 dark:text-violet-400;
  }

  .about-hero-title {
    @apply text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl dark:text-slate-100;
  }

  .about-hero-copy {
    @apply text-base text-slate-600 sm:text-lg dark:text-slate-400;
  }

  .about-hero-card-visual {
    @apply overflow-hidden;
  }

  .about-hero-card-visual img {
    width: 100%;
    height: auto;
  }

  .about-content-card {
    @apply mt-8 flex flex-col gap-6 rounded-xl border border-slate-200/80 bg-white p-6 text-left shadow-xl sm:p-8 sm:border-slate-300 dark:border-slate-600 dark:bg-slate-800;
  }

  .about-content-card > div:first-child > * + * {
    @apply mt-4;
  }

  .about-content-title {
    @apply text-lg font-semibold text-slate-900 dark:text-slate-100;
  }

  .about-content-copy {
    @apply text-slate-600 text-sm sm:text-base dark:text-slate-400;
  }

  .about-content-copy a {
    @apply font-medium text-violet-600 underline decoration-violet-300 underline-offset-2 hover:text-violet-800 hover:decoration-violet-600 dark:text-violet-400 dark:decoration-violet-500 dark:hover:text-violet-300 dark:hover:decoration-violet-400;
  }

  .about-content-back {
    @apply pt-2;
  }

  .about-content-back-link {
    @apply font-medium text-violet-600 hover:text-violet-800 hover:underline dark:text-violet-400 dark:hover:text-violet-300;
  }

  /* ----- App nav (logged-in top menu) ----- */
  .app-nav-link {
    @apply inline-block py-1 transition-colors;
  }

  .app-nav-link:hover {
    @apply text-slate-900 dark:text-slate-100;
  }

  .app-nav-link.active {
    @apply text-slate-900 font-medium underline decoration-2 decoration-violet-600 underline-offset-4 dark:text-slate-100 dark:decoration-violet-400;
  }

  .app-nav-link-mobile {
    @apply block py-2 text-slate-700 dark:text-slate-300;
  }

  .app-nav-link-mobile.active {
    @apply font-medium text-violet-700 border-l-2 border-violet-600 pl-2 -ml-0.5 dark:text-violet-400 dark:border-violet-400;
  }

  /* ----- App main content: inputs match header (bg-white/90) ----- */
  .app-main-content input:not([type="file"]):not([type="checkbox"]),
  .app-main-content select,
  .app-main-content textarea {
    @apply bg-white/90 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-100;
  }

  /* ----- Infer schema modal: input backgrounds (portal is outside .app-main-content) ----- */
  .infer-schema-modal input:not([type="file"]):not([type="checkbox"]),
  .infer-schema-modal select,
  .infer-schema-modal textarea {
    @apply bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-slate-100;
  }

  /* ----- App form sections (semantic structure for pipeline pages) ----- */
  .app-form-section-title {
    @apply text-lg font-semibold text-slate-900 dark:text-slate-100;
  }

  .app-form-fieldset {
    border: 0;
    margin: 0;
    min-width: 0;
    padding: 0;
  }

  .app-form-legend {
    display: table;
    padding: 0;
    @apply text-lg font-semibold text-slate-900 dark:text-slate-100;
  }
}